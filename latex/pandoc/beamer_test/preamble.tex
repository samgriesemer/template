%%%%%%%%%%%%%color 
\definecolor{lblue}{RGB}{223,223,255}
\definecolor{lred}{RGB}{255, 129, 120}
\definecolor{lgreen}{RGB}{29, 84, 47}

\definecolor{tred}{RGB}{232, 77, 77}

% bright colors
\definecolor{bred}{RGB}{233, 52, 49}
\definecolor{bgreen}{RGB}{129, 183, 5}
\definecolor{bviolet}{RGB}{100, 106, 220}

% neutral colors
\definecolor{ngreen}{RGB}{113, 158, 7}
\definecolor{nred}{RGB}{220, 50, 47}
\definecolor{nyellow}{RGB}{181, 137, 0}

\definecolor{nviolet1}{RGB}{108, 113, 196}
\definecolor{nviolet2}{RGB}{98, 130, 194}
\definecolor{nviolet3}{RGB}{87, 146, 192}

\definecolor{grey1}{RGB}{50, 50, 50}
\definecolor{grey2}{RGB}{70, 70, 70}
\definecolor{grey3}{RGB}{90, 90, 90}


\setbeamercolor{palette primary}{bg=grey1,fg=white}
\setbeamercolor{palette secondary}{bg=grey2,fg=white}
\setbeamercolor{palette tertiary}{bg=grey3,fg=white}
\setbeamercolor{palette quaternary}{bg=grey3,fg=white}
\setbeamercolor{structure}{fg=bred} % itemize, enumerate, etc




\makeatletter
\newcommand\beamerboxesframed[2][]{%
  \global\let\beamer@firstlineitemizeunskip=\relax%
  \vbox\bgroup%
  \setkeys{beamerboxes}{upper=block title,lower=block body,width=\textwidth}%
  \setkeys{beamerboxes}{#1}%
  {%
    \usebeamercolor{\bmb@lower}%
    \globalcolorstrue%
    \colorlet{lower.bg}{bg}%
  }%
  {%
    \usebeamercolor{\bmb@upper}%
    \globalcolorstrue%
    \colorlet{upper.bg}{bg}%
  }%
  %
  % Typeset head
  %
  \vskip4bp
  \setbox\bmb@box=\hbox{%
    \begin{minipage}[b]{\bmb@width}%
      \usebeamercolor[fg]{\bmb@upper}%
      #2%
    \end{minipage}}%
  \ifdim\wd\bmb@box=0pt%
    \setbox\bmb@box=\hbox{}%
    \ht\bmb@box=0pt%
    \bmb@prevheight=-4.5pt%
  \else%
    \wd\bmb@box=\bmb@width%
    \bmb@temp=\dp\bmb@box%
    \ifdim\bmb@temp<1.5pt%
      \bmb@temp=1.5pt%
    \fi%
    \setbox\bmb@box=\hbox{\raise\bmb@temp\hbox{\box\bmb@box}}%
    \dp\bmb@box=0pt%
    \bmb@prevheight=\ht\bmb@box%
  \fi%
  \bmb@temp=\bmb@width%
  \bmb@dima=\bmb@temp\advance\bmb@dima by2.2bp%
  \bmb@dimb=\bmb@temp\advance\bmb@dimb by4bp%
  \hbox{%
    \begin{pgfpicture}{0bp}{+-\ht\bmb@box}{0bp}{+-\ht\bmb@box}
      \ifdim\wd\bmb@box=0pt%
        \color{lower.bg}%
      \else%
        \color{upper.bg}%
      \fi%
      \pgfpathqmoveto{-4bp}{-1bp}
      \pgfpathqcurveto{-4bp}{1.2bp}{-2.2bp}{3bp}{0bp}{3bp}
      \pgfpathlineto{\pgfpoint{\bmb@temp}{3bp}}
      \pgfpathcurveto%
      {\pgfpoint{\bmb@dima}{3bp}}%
      {\pgfpoint{\bmb@dimb}{1.2bp}}%
      {\pgfpoint{\bmb@dimb}{-1bp}}%
      \bmb@dima=-\ht\bmb@box%
      \advance\bmb@dima by-2pt%
      \pgfpathlineto{\pgfpoint{\bmb@dimb}{\bmb@dima}}
      \pgfpathlineto{\pgfpoint{-4bp}{\bmb@dima}}
      \pgfpathclose
      \pgfsetstrokecolor{black}\pgfusepath{stroke, fill}
    \end{pgfpicture}%
    \copy\bmb@box%
  }%
  \nointerlineskip%
  \ifdim\wd\bmb@box=0pt
  \else
    \vskip2.4pt%
  \fi%
  \nointerlineskip%
  \setbox\bmb@colorbox=\hbox{{\pgfpicturetrue\pgfsetcolor{lower.bg}}}%
  \setbox\bmb@box=\hbox\bgroup\begin{minipage}[b]{\bmb@width}%
    \vskip2pt%
    \usebeamercolor[fg]{\bmb@lower}%
    \colorlet{beamerstructure}{upper.bg}%
    \colorlet{structure}{upper.bg}%
    %\color{.}%
}

\def\endbeamerboxesframed{%
  \end{minipage}\egroup%
  \wd\bmb@box=\bmb@width%
  \bmb@temp=\dp\bmb@box%
  \advance\bmb@temp by.5pt%
  \setbox\bmb@box=\hbox{\raise\bmb@temp\hbox{\box\bmb@box}}%
  \dp\bmb@box=0pt%
  \bmb@temp=\wd\bmb@box%
  \bmb@dima=\bmb@temp\advance\bmb@dima by2.2bp%
  \bmb@dimb=\bmb@temp\advance\bmb@dimb by4bp%
  \hbox{%
    \begin{pgfpicture}{0bp}{0bp}{0bp}{0bp}
      \unhbox\bmb@colorbox%
      \pgfpathmoveto{\pgfpoint{-4bp}{\ht\bmb@box}}
      \pgfpathlineto{\pgfpoint{-4bp}{1bp}}
      \pgfpathqcurveto{-4bp}{-1.2bp}{-2.2bp}{-3bp}{0bp}{-3bp}
      \pgfpathlineto{\pgfpoint{\the\bmb@temp}{-3bp}}
      \pgfpathcurveto%
      {\pgfpoint{\the\bmb@dima}{-3bp}}%
      {\pgfpoint{\the\bmb@dimb}{-1.2bp}}%
      {\pgfpoint{\the\bmb@dimb}{1bp}}%
      {
      \bmb@dima=\ht\bmb@box%
      \pgfpathlineto{\pgfpoint{\bmb@dimb}{\bmb@dima}}
      \pgfsetstrokecolor{black}\pgfusepath{stroke, fill}
      }
    \end{pgfpicture}%
    \box\bmb@box%
  }%
  \vskip2bp%
  \egroup% of \vbox\bgroup
}
\makeatother

\defbeamertemplateparent{blocks}[framed]{block begin,block end,%
  block alerted begin,block alerted end,%
  block example begin,block example end}[1][]
{[#1]}

\defbeamertemplate{block begin}{framed}[1][]
{
  \par\vskip\medskipamount%
  \begin{beamerboxesframed}[upper=block title,lower=block body,#1]%
    {\raggedright\usebeamerfont*{block title}\insertblocktitle}%
    \raggedright%
    \usebeamerfont{block body}%
}
\defbeamertemplate{block end}{framed}[1][]
{\end{beamerboxesframed}\vskip\smallskipamount}

\defbeamertemplate{block alerted begin}{framed}[1][]
{
  \par\vskip\medskipamount%
  \begin{beamerboxesframed}[upper=block title alerted,lower=block body alerted,#1]%
    {\raggedright\usebeamerfont*{block title alerted}\insertblocktitle}%
    \raggedright%
    \usebeamerfont{block body alerted}%
}%
\defbeamertemplate{block alerted end}{framed}[1][]
{\end{beamerboxesframed}\vskip\smallskipamount}

\defbeamertemplate{block example begin}{framed}[1][]
{
  \par\vskip\medskipamount%
  \begin{beamerboxesframed}[upper=block title example,lower=block body example,#1]
    {\raggedright\usebeamerfont*{block title example}\insertblocktitle}%
    \raggedright%
    \usebeamerfont{block body alerted}%
}%
\defbeamertemplate{block example end}{framed}[1][]
{\end{beamerboxesframed}\vskip\smallskipamount}

% all of this to define the following:
%\setbeamertemplate{blocks}[framed]

%% custom style overrides %%
\setbeamertemplate{title page}[default][colsep=-4bp,rounded=true]
\setbeamercolor{title}{bg=nred,fg=white}

% remove styles from block elements, straight edges
\setbeamertemplate{blocks}[default]
% can keep or remove shadow and have rounded edges with:
%
%\setbeamertemplate{blocks}[rounded][shadow=false]
%
% ALSO, the following will remove the weird gradient at the bottom of the heading:
%
%\makeatletter
%\pgfdeclareverticalshading[lower.bg,upper.bg]{bmb@transition}{200cm}{%
  %color(0pt)=(upper.bg); color(2pt)=(upper.bg); color(4pt)=(upper.bg)}
%\makeatother
%
% end block styles


%% HEADLINE SECTIONS %%
%% Change subsection in footer color (author and institute color)
\setbeamercolor{subsection in head/foot}{bg=nviolet1,fg=white}

%change ilmenau section dot color 
\setbeamercolor{section in head/foot}{bg=nred,fg=black} 
%% END HEADLINE SECTIONS %%


%% MINIFRAME %%
%% change circle miniframes color
\setbeamercolor{mini frame}{fg=orange, bg=nyellow}
%% Change the circle in miniframes to a box
\setbeamertemplate{mini frame}[box]
\setbeamertemplate{mini frame in current subsection}[box]
%% END MINIFRAME %%

\setbeamertemplate{itemize item}{\color{nviolet1}$\blacktriangleright$}
\setbeamertemplate{itemize subitem}{%
  \tiny\raise1.5pt\hbox{\donotcoloroutermaths$\blacktriangleright$}
}
\setbeamertemplate{enumerate item}[square]
\setbeamertemplate{enumerate subitem}[square]
\setbeamertemplate{section in toc}{\inserttocsectionnumber.~\inserttocsection}
\setbeamertemplate{subsection in toc}[square]

\setbeamercolor{section in toc}{fg=black} % TOC sections
\setbeamercolor{subsection in toc}{bg=black,fg=black} % TOC sections
\setbeamercolor{block title}{bg=grey2,fg=white}
\setbeamercolor{block body}{bg=black!10,fg=black}
\setbeamercolor{item projected}{bg=nviolet1}
\setbeamercolor{frametitle}{bg=black!10,fg=black}



% example including the prefixed section number
%\renewcommand{\thesubsection}{\thesection.\alph{subsection}}
\renewcommand{\thesubsection}{\alph{subsection}}
\setbeamertemplate{headline}
{
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=.5\paperwidth,ht=2.25ex,dp=1ex,right]{section in head/foot}%
    \usebeamerfont{section in head/foot}\thesection.\ \insertsectionhead\hspace*{2ex}
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.5\paperwidth,ht=2.25ex,dp=1ex,left]{subsection in head/foot}%
      \usebeamerfont{subsection in head/foot}\hspace*{2ex}\thesubsection)\ \insertsubsectionhead
  \end{beamercolorbox}}%
  \vskip0pt%
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Create framenumber in footer
%\newcommand{\frameofframes}{/}
%\newcommand{\setframeofframes}[1]{\renewcommand{\frameofframes}{#1}}
%
%\setframeofframes{of}
%\makeatletter
%\setbeamertemplate{footline}
%  {%
%    \begin{beamercolorbox}[colsep=1.5pt]{upper separation line foot}
%    \end{beamercolorbox}
%    \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex,%
%      leftskip=.3cm,rightskip=.3cm plus1fil]{author in head/foot}%
%      \leavevmode{\usebeamerfont{author in head/foot}\insertshortauthor}%
%      \hfill%
%      {\usebeamerfont{institute in head/foot}\usebeamercolor[fg]{institute in head/foot}\insertshortinstitute}%
%    \end{beamercolorbox}%
%    \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex,%
%      leftskip=.3cm,rightskip=.3cm plus1fil]{title in head/foot}%
%      {\usebeamerfont{title in head/foot}\insertshorttitle}%
%      \hfill%
%      {\usebeamerfont{frame number}\usebeamercolor[fg]{frame number}\insertframenumber~\frameofframes~\inserttotalframenumber}
%    \end{beamercolorbox}%
%    \begin{beamercolorbox}[colsep=1.5pt]{lower separation line foot}
%    \end{beamercolorbox}
%  }
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Remove subsection bar in mini frames
%\defbeamertemplate*{headline}{miniframes theme no subsection}
%{%
%  \begin{beamercolorbox}[colsep=1.5pt]{upper separation line head}
%  \end{beamercolorbox}
%  \begin{beamercolorbox}{section in head/foot}
%    \vskip2pt\insertnavigation{\paperwidth}\vskip2pt
%  \end{beamercolorbox}%
%  \begin{beamercolorbox}[colsep=1.5pt]{lower separation line head}
%  \end{beamercolorbox}
%}
%
%\setbeamertemplate{footline}[miniframes theme no subsection]
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\makeatother


% added packages
%\usepackage{amsmath}
%\usepackage{amsfonts}
%\usepackage{amssymb}
%\usepackage{bm}
%\usepackage{mathtools}
%\usepackage{nicefrac}
%%\usepackage{minted}
%\usepackage{algorithm}
%\usepackage[noend]{algpseudocode}
%\usepackage{tikz}
%\usepackage{tikz-qtree}
%\usetikzlibrary{shadows,arrows.meta,positioning,backgrounds,fit,chains,scopes,shapes}
%
%\usepackage{pgfplots}
%\pgfplotsset{
%  compat=newest,
%  plot coordinates/math parser=false,
%  tick label style={font=\footnotesize, /pgf/number format/fixed},
%  label style={font=\small},
%  legend style={font=\small},
%  every axis/.append style={
%    tick align=outside,
%    clip mode=individual,
%    scaled ticks=false,
%    thick,
%    tick style={semithick, black}
%  }
%}
%\usepgfplotslibrary{groupplots}
%\usepgfplotslibrary{dateplot}
%
%% custom math operators
%\DeclareMathOperator*{\argmin}{\arg\!\min}
%\DeclareMathOperator*{\argmax}{\arg\!\max}
%\DeclareMathOperator{\E}{\mathbb{E}}
%\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}
%\renewcommand{\vec}[1]{\mathbf{#1}} % overriding vector

%\newtheorem{theorem}{Theorem}[section]
%\newtheorem{lemma}[theorem]{Lemma}
%\newtheorem{conj}[theorem]{Conjecture}


